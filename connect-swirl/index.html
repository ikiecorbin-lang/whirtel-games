<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>

<!-- ✅ OFFICIAL NAME -->
<title>Connect Even More — Team Swirl (7×7)</title>

<style>
:root{
  --bg:#020617;
  --panel:#02081f;
  --slot:#f8fafc;

  --red:#ef4444;
  --red2:#b91c1c;

  --blue:#3b82f6;
  --blue2:#1e3a8a;

  --gold:#facc15;
  --muted:#94a3b8;

  --accent:#38bdf8;
}

html,body{
  margin:0;height:100%;
  background:radial-gradient(circle at top,#0b1120,#020617);
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  color:#e5e7eb;
}

.app{
  max-width:1100px;
  margin:0 auto;
  padding:18px;
  display:grid;
  grid-template-columns:320px 1fr;
  gap:18px;
}

header{
  grid-column:1/-1;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  flex-wrap:wrap;
}

h1{
  margin:0;
  font-size:26px;
  letter-spacing:.02em;
}

.badge{
  font-size:12px;
  padding:4px 10px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.45);
  color:#e5e7eb;
  background:rgba(15,23,42,.55);
}

.controls{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  justify-content:flex-end;
}

button.action, a.action{
  appearance:none;
  border:0;
  border-radius:999px;
  padding:9px 14px;
  font-weight:800;
  font-size:13px;
  cursor:pointer;
  background:linear-gradient(135deg,#1d4ed8,#38bdf8);
  color:white;
  box-shadow:0 10px 20px rgba(37,99,235,.35);
  text-decoration:none;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:8px;
}

button.action.secondary, a.action.secondary{
  background:rgba(15,23,42,.7);
  border:1px solid rgba(148,163,184,.45);
  box-shadow:none;
}

button.action:hover, a.action:hover{
  filter:brightness(1.05);
  transform:translateY(-1px);
}

.sidebar{
  background:linear-gradient(145deg,#020617,#02081f);
  border-radius:18px;
  padding:14px;
  border:1px solid rgba(148,163,184,.35);
  display:flex;
  flex-direction:column;
  gap:14px;
  box-shadow:0 18px 42px rgba(0,0,0,.35);
}

.subtitle{
  font-size:11px;
  text-transform:uppercase;
  letter-spacing:.22em;
  color:var(--muted);
}

.turnCard{
  border-radius:16px;
  border:1px solid rgba(148,163,184,.35);
  background:radial-gradient(circle at top,#0b1120,#020617);
  padding:12px;
  display:flex;
  flex-direction:column;
  gap:10px;
}

.turnRow{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
}

.turnText{
  font-weight:900;
  font-size:14px;
  letter-spacing:.02em;
}
.turnSub{
  color:var(--muted);
  font-size:12px;
  font-weight:700;
}

.preview{
  display:flex;
  align-items:center;
  gap:10px;
  padding:10px;
  border-radius:14px;
  background:rgba(2,6,23,.55);
  border:1px solid rgba(148,163,184,.25);
}
.preview .mini{
  width:34px;height:34px;border-radius:999px;
  box-shadow:0 10px 18px rgba(0,0,0,.35), inset 0 4px 10px rgba(255,255,255,.35);
  position:relative;
  overflow:hidden;
}
.preview .mini::before{
  content:"";
  position:absolute; inset:-10%;
  background:radial-gradient(circle at 25% 15%,rgba(255,255,255,.9),transparent 60%);
  mix-blend-mode:screen;
}
.preview .label{
  font-weight:900;
  font-size:13px;
}
.preview .hint{
  font-size:12px;
  color:var(--muted);
}

.teamPanel{
  border-radius:16px;
  padding:12px;
  border:1px solid rgba(148,163,184,.25);
  background:rgba(2,6,23,.45);
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
}
.teamPanel.active{
  border-color:rgba(250,204,21,.9);
  box-shadow:0 0 0 1px rgba(250,204,21,.25), 0 14px 28px rgba(250,204,21,.18);
}
.teamLeft{
  display:flex;
  align-items:center;
  gap:10px;
}
.teamDot{
  width:14px;height:14px;border-radius:999px;
  box-shadow:0 0 16px rgba(250,204,21,.18);
}
.teamName{
  font-weight:1000;
  letter-spacing:.03em;
}
.teamNote{
  font-size:12px;
  color:var(--muted);
  font-weight:700;
}

.boardWrap{
  background:linear-gradient(145deg,rgba(15,23,42,.6),rgba(2,6,23,.9));
  border:1px solid rgba(148,163,184,.45);
  border-radius:22px;
  padding:14px;
  box-shadow:0 22px 60px rgba(0,0,0,.5);
}

.cols{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:12px;
}

.col{
  position:relative;
  background:radial-gradient(circle at top,#020617,#020617 45%,#02081f);
  border-radius:16px;
  padding:46px 8px 12px;
  border:1px solid rgba(148,163,184,.35);
  display:grid;
  align-content:end;
  gap:8px;
  min-height:560px;
}

.drop{
  position:absolute;
  top:8px;
  left:50%;
  transform:translateX(-50%);
  width:40px;height:40px;
  border-radius:999px;
  border:2px solid rgba(148,163,184,.45);
  background:rgba(2,6,23,.75);
  color:#e5e7eb;
  cursor:pointer;
  font-weight:1000;
  box-shadow:0 10px 22px rgba(0,0,0,.35);
}
.drop:hover{
  border-color:#38bdf8;
  box-shadow:0 14px 28px rgba(56,189,248,.25);
}
.drop:disabled{
  cursor:not-allowed;
  opacity:.35;
  filter:saturate(.6);
  border-color:rgba(148,163,184,.35);
  box-shadow:none;
}

.slot{
  width:58px;height:58px;
  border-radius:999px;
  background:radial-gradient(circle at 30% 20%,#fff,#e5e7eb 55%,#cbd5e1);
  box-shadow:inset 0 7px 14px rgba(0,0,0,.28), 0 2px 4px rgba(0,0,0,.25);
  border:1px solid rgba(148,163,184,.65);
}

.disc{
  position:absolute;
  width:58px;height:58px;
  border-radius:999px;
  top:0;
  transform:translateY(-92px);
  transition:transform .26s cubic-bezier(.22,.9,.22,1);
  box-shadow:0 16px 30px rgba(0,0,0,.45), inset 0 4px 10px rgba(255,255,255,.35);
  overflow:hidden;
}
.disc::before{
  content:"";
  position:absolute; inset:-12%;
  background:radial-gradient(circle at 25% 15%,rgba(255,255,255,.9),transparent 60%);
  mix-blend-mode:screen;
}

.redSolid{ background:radial-gradient(circle at 30% 20%,#fecaca,var(--red) 52%,#7f1d1d); border:1px solid rgba(239,68,68,.9); }
.blueSolid{ background:radial-gradient(circle at 30% 20%,#bfdbfe,var(--blue) 52%,#1e3a8a); border:1px solid rgba(59,130,246,.9); }

.redSwirl{
  background:
    radial-gradient(circle,#fecaca 18%,transparent 19%),
    repeating-conic-gradient(var(--red) 0 12deg,var(--red2) 12deg 24deg);
  border:1px solid rgba(239,68,68,.9);
}
.blueSwirl{
  background:
    radial-gradient(circle,#bfdbfe 18%,transparent 19%),
    repeating-conic-gradient(var(--blue) 0 12deg,var(--blue2) 12deg 24deg);
  border:1px solid rgba(59,130,246,.9);
}

/* Holds the winning 4 so it doesn't "move too fast" */
.winHold{
  outline:4px solid rgba(250,204,21,.98);
  box-shadow:0 0 26px rgba(250,204,21,.85), 0 16px 30px rgba(0,0,0,.45);
  transform:scale(1.04);
  z-index:5;
}
.dimBoard .disc{ opacity:.35; filter:saturate(.75); }
.dimBoard .disc.winHold{ opacity:1; filter:none; }

.banner{
  position:fixed; inset:0;
  display:none; align-items:center; justify-content:center;
  background:radial-gradient(circle at top,rgba(2,6,23,.55),rgba(2,6,23,.92));
  backdrop-filter:blur(6px);
}
.banner.show{display:flex;}

.card{
  background:radial-gradient(circle at top,#fff,#e5e7eb 55%,#d1d5db);
  color:#020617;
  padding:20px 24px;
  border-radius:18px;
  border:1px solid rgba(148,163,184,.9);
  box-shadow:0 20px 55px rgba(0,0,0,.5);
  width:min(860px,92vw);
  text-align:left;
}

.cardHeader{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:12px;
  flex-wrap:wrap;
}

.card h2{margin:0 0 6px;}
.card .small{font-size:13px;color:#334155;font-weight:800;margin-top:8px;}

.rulesBody{
  margin-top:14px;
  display:grid;
  grid-template-columns:1fr;
  gap:12px;
}

.rulesRow{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}

.rulesBtn{
  background:linear-gradient(135deg,#111827,#0b1120);
  border:1px solid rgba(148,163,184,.55);
  color:#0b1120;
}

.rulesLink{
  display:inline-flex;
  align-items:center;
  gap:8px;
  font-weight:900;
  color:#0b1120;
  text-decoration:none;
}

.pdfWrap{
  width:100%;
  height:min(70vh,560px);
  border-radius:14px;
  overflow:hidden;
  border:1px solid rgba(148,163,184,.55);
  background:#0b1120;
}

.pdfWrap iframe{
  width:100%;
  height:100%;
  border:0;
  background:#0b1120;
}

.closeBtn{
  background:linear-gradient(135deg,#fb7185,#f59e0b);
  color:#0b1120;
  border:0;
  border-radius:999px;
  padding:9px 14px;
  font-weight:1000;
  cursor:pointer;
}

@media (max-width:960px){
  .app{grid-template-columns:1fr;}
  .col{min-height:520px;}
}
@media (prefers-reduced-motion: reduce){
  button.action:hover, a.action:hover{transform:none;}
  .disc{transition:none;}
}
</style>
</head>

<body>
<div class="app">
  <header>
    <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap;">
      <!-- ✅ OFFICIAL NAME ON PAGE -->
      <h1>Connect Even More — Swirl Teams</h1>
      <span class="badge">7×7 · Team Connect 4 · Fixed Turn Cycle</span>
    </div>

    <div class="controls">
      <!-- ✅ BACK HOME -->
      <a class="action secondary" href="index.html" title="Back to Home">← Home</a>

      <!-- ✅ RULES BUTTON (opens overlay) -->
      <button class="action secondary" id="rulesBtn" title="Rules">Rules</button>

      <button class="action" id="newRound">New Round</button>
      <button class="action secondary" id="reset">Reset</button>
    </div>
  </header>

  <aside class="sidebar">
    <div class="subtitle">Who’s up next</div>

    <div class="turnCard">
      <div class="turnRow">
        <div>
          <div class="turnText" id="turnTitle">TEAM RED — SOLID</div>
          <div class="turnSub" id="turnCycle">Cycle: 1 of 4</div>
        </div>
        <div class="turnSub" id="turnHint">Drop a chip</div>
      </div>
      <div class="preview">
        <div class="mini" id="miniChip"></div>
        <div>
          <div class="label" id="miniLabel">Red Solid</div>
          <div class="hint">Turn order: Red Solid → Blue Solid → Red Swirl → Blue Swirl</div>
        </div>
      </div>
    </div>

    <div class="subtitle">Teams</div>

    <div class="teamPanel active" id="teamRedPanel">
      <div class="teamLeft">
        <span class="teamDot" style="background:var(--red)"></span>
        <div>
          <div class="teamName">TEAM RED</div>
          <div class="teamNote">Solid + Swirl</div>
        </div>
      </div>
      <div class="teamNote">Goes 1st</div>
    </div>

    <div class="teamPanel" id="teamBluePanel">
      <div class="teamLeft">
        <span class="teamDot" style="background:var(--blue)"></span>
        <div>
          <div class="teamName">TEAM BLUE</div>
          <div class="teamNote">Solid + Swirl</div>
        </div>
      </div>
      <div class="teamNote">Goes 2nd</div>
    </div>

    <div class="subtitle">Keyboard</div>
    <div style="color:var(--muted);font-weight:800;font-size:12px;line-height:1.4">
      Press <b>1–7</b> to drop into a column. Press <b>R</b> to reset.
    </div>
  </aside>

  <main class="boardWrap">
    <div class="cols" id="cols"></div>
  </main>
</div>

<!-- WIN BANNER -->
<div class="banner" id="banner" role="dialog" aria-modal="true" aria-label="Game result">
  <div class="card" style="max-width:520px;text-align:center;">
    <h2 id="winTitle">TEAM RED WINS!</h2>
    <button class="action" id="playAgain">Play Again</button>
    <div class="small" id="winSub">Winning 4 highlighted — solid + swirl both count for the team</div>
  </div>
</div>

<!-- RULES OVERLAY -->
<div class="banner" id="rulesOverlay" role="dialog" aria-modal="true" aria-label="Rules">
  <div class="card">
    <div class="cardHeader">
      <div>
        <h2 style="margin:0;">Rules — Connect Even More: Swirl Teams</h2>
        <div class="small">If the PDF doesn’t display on your device, use “Open PDF”.</div>
      </div>
      <div class="rulesRow">
        <!-- ✅ Change this filename if yours is different -->
        <a class="action secondary" id="openPdfLink" href="Connect_Even_More_Swirl_Rules.pdf" target="_blank" rel="noopener">Open PDF</a>
        <button class="closeBtn" id="closeRules">Close</button>
      </div>
    </div>

    <div class="rulesBody">
      <div class="pdfWrap">
        <iframe id="rulesFrame" title="Rules PDF" src="Connect_Even_More_Swirl_Rules.pdf"></iframe>
      </div>
    </div>
  </div>
</div>

<script>
(() => {
  const ROWS = 7, COLS = 7;
  const CONNECT = 4;

  const cycle = [
    { team:'red',  chip:'solid', cls:'redSolid',  label:'TEAM RED — SOLID',  mini:'Red Solid'  },
    { team:'blue', chip:'solid', cls:'blueSolid', label:'TEAM BLUE — SOLID', mini:'Blue Solid' },
    { team:'red',  chip:'swirl', cls:'redSwirl',  label:'TEAM RED — SWIRL',  mini:'Red Swirl'  },
    { team:'blue', chip:'swirl', cls:'blueSwirl', label:'TEAM BLUE — SWIRL', mini:'Blue Swirl' }
  ];

  let board = Array.from({length:ROWS}, () => Array(COLS).fill(null)); // {team, chip, cls, discEl}
  let step = 0;
  let accepting = true;

  const colsEl = document.getElementById('cols');

  const banner = document.getElementById('banner');
  const winTitle = document.getElementById('winTitle');
  const winSub = document.getElementById('winSub');

  const rulesOverlay = document.getElementById('rulesOverlay');
  const rulesBtn = document.getElementById('rulesBtn');
  const closeRules = document.getElementById('closeRules');
  const rulesFrame = document.getElementById('rulesFrame');
  const openPdfLink = document.getElementById('openPdfLink');

  const turnTitle = document.getElementById('turnTitle');
  const turnCycle = document.getElementById('turnCycle');
  const turnHint = document.getElementById('turnHint');
  const miniChip = document.getElementById('miniChip');
  const miniLabel = document.getElementById('miniLabel');

  const teamRedPanel = document.getElementById('teamRedPanel');
  const teamBluePanel = document.getElementById('teamBluePanel');

  // ✅ Set your PDF name here if you rename it later
  const RULES_PDF = "Connect_Even_More_Swirl_Rules.pdf";

  function setRulesPdf(){
    rulesFrame.src = RULES_PDF;
    openPdfLink.href = RULES_PDF;
  }

  function buildBoard(){
    colsEl.innerHTML = '';
    for(let c=0;c<COLS;c++){
      const col = document.createElement('div');
      col.className = 'col';

      const btn = document.createElement('button');
      btn.className = 'drop';
      btn.textContent = '↓';
      btn.title = `Drop in column ${c+1}`;
      btn.setAttribute('aria-label', `Drop in column ${c+1}`);
      btn.onclick = () => drop(c);
      col.appendChild(btn);

      for(let r=0;r<ROWS;r++){
        const s = document.createElement('div');
        s.className = 'slot';
        col.appendChild(s);
      }
      colsEl.appendChild(col);
    }
  }

  function nextEmptyRow(c){
    for(let r=ROWS-1;r>=0;r--){
      if(!board[r][c]) return r;
    }
    return -1;
  }

  function inB(r,c){ return r>=0 && r<ROWS && c>=0 && c<COLS; }

  function countFrom(r,c,dr,dc,team){
    let n = 1;
    let rr=r+dr, cc=c+dc;
    while(inB(rr,cc) && board[rr][cc]?.team === team){ n++; rr+=dr; cc+=dc; }
    rr=r-dr; cc=c-dc;
    while(inB(rr,cc) && board[rr][cc]?.team === team){ n++; rr-=dr; cc-=dc; }
    return n;
  }

  function isWin(r,c,team){
    const dirs = [[0,1],[1,0],[1,1],[1,-1]];
    return dirs.some(([dr,dc]) => countFrom(r,c,dr,dc,team) >= CONNECT);
  }

  function isBoardFull(){
    for(let r=0;r<ROWS;r++){
      for(let c=0;c<COLS;c++){
        if(!board[r][c]) return false;
      }
    }
    return true;
  }

  function getWinningFour(r,c,team){
    const dirs = [[0,1],[1,0],[1,1],[1,-1]];
    for(const [dr,dc] of dirs){
      const cells = [[r,c]];
      let rr=r+dr, cc=c+dc;
      while(inB(rr,cc) && board[rr][cc]?.team===team){ cells.push([rr,cc]); rr+=dr; cc+=dc; }
      rr=r-dr; cc=c-dc;
      while(inB(rr,cc) && board[rr][cc]?.team===team){ cells.unshift([rr,cc]); rr-=dr; cc-=dc; }

      if(cells.length >= CONNECT){
        const idx = cells.findIndex(([x,y]) => x===r && y===c);
        let start = Math.max(0, Math.min(idx - 3, cells.length - CONNECT));
        if(idx < start) start = idx;
        if(idx > start + 3) start = idx - 3;
        return cells.slice(start, start + CONNECT);
      }
    }
    return null;
  }

  function showWinningFour(r,c,team){
    const four = getWinningFour(r,c,team);
    if(!four) return;
    document.querySelector('.boardWrap')?.classList.add('dimBoard');
    four.forEach(([rr,cc]) => {
      const el = board[rr][cc]?.discEl;
      if(el) el.classList.add('winHold');
    });
  }

  function setBanner(title, subtitle){
    winTitle.textContent = title;
    winSub.textContent = subtitle;
    banner.classList.add('show');
    document.getElementById('playAgain').focus();
  }

  function updateDropButtons(){
    for(let c=0;c<COLS;c++){
      const colEl = colsEl.children[c];
      const btn = colEl.querySelector('.drop');
      btn.disabled = (nextEmptyRow(c) === -1) || banner.classList.contains('show') || rulesOverlay.classList.contains('show') || !accepting;
    }
  }

  function updateTurnUI(){
    const s = cycle[step % cycle.length];
    turnTitle.textContent = s.label;
    turnCycle.textContent = `Cycle: ${(step % 4) + 1} of 4`;
    miniLabel.textContent = s.mini;
    turnHint.textContent = `Drop a chip (${s.mini})`;

    miniChip.className = 'mini';
    miniChip.style.background = '';
    miniChip.style.border = '';

    if(s.cls==='redSolid'){
      miniChip.style.background = 'radial-gradient(circle at 30% 20%,#fecaca,var(--red) 52%,#7f1d1d)';
      miniChip.style.border = '1px solid rgba(239,68,68,.9)';
    } else if(s.cls==='blueSolid'){
      miniChip.style.background = 'radial-gradient(circle at 30% 20%,#bfdbfe,var(--blue) 52%,#1e3a8a)';
      miniChip.style.border = '1px solid rgba(59,130,246,.9)';
    } else if(s.cls==='redSwirl'){
      miniChip.style.background =
        'radial-gradient(circle,#fecaca 18%,transparent 19%), repeating-conic-gradient(var(--red) 0 12deg,var(--red2) 12deg 24deg)';
      miniChip.style.border = '1px solid rgba(239,68,68,.9)';
    } else {
      miniChip.style.background =
        'radial-gradient(circle,#bfdbfe 18%,transparent 19%), repeating-conic-gradient(var(--blue) 0 12deg,var(--blue2) 12deg 24deg)';
      miniChip.style.border = '1px solid rgba(59,130,246,.9)';
    }

    teamRedPanel.classList.toggle('active', s.team === 'red');
    teamBluePanel.classList.toggle('active', s.team === 'blue');

    updateDropButtons();
  }

  function drop(col){
    if(!accepting) return;
    if(banner.classList.contains('show')) return;
    if(rulesOverlay.classList.contains('show')) return;

    const row = nextEmptyRow(col);
    const colEl = colsEl.children[col];
    const btn = colEl.querySelector('.drop');

    if(row === -1){
      btn?.animate(
        [
          {transform:'translateX(-50%)'},
          {transform:'translateX(calc(-50% - 4px))'},
          {transform:'translateX(calc(-50% + 4px))'},
          {transform:'translateX(-50%)'}
        ],
        {duration:180,iterations:1}
      );
      return;
    }

    accepting = false;
    updateDropButtons();

    const s = cycle[step % cycle.length];

    const disc = document.createElement('div');
    disc.className = `disc ${s.cls}`;
    colEl.appendChild(disc);

    const slots = colEl.querySelectorAll('.slot');
    const slotRect = slots[row].getBoundingClientRect();
    const colRect  = colEl.getBoundingClientRect();

    disc.style.left = (slotRect.left - colRect.left) + 'px';

    requestAnimationFrame(() => {
      disc.style.transform = `translateY(${slotRect.top - colRect.top}px)`;
    });

    disc.addEventListener('transitionend', () => {
      const yFinal = slotRect.top - colRect.top;
      disc.style.transform = 'none';
      disc.style.top = yFinal + 'px';

      board[row][col] = {team:s.team, chip:s.chip, cls:s.cls, discEl:disc};

      if(isWin(row,col,s.team)){
        showWinningFour(row,col,s.team);
        accepting = false;
        updateDropButtons();

        setTimeout(() => {
          setBanner(
            (s.team === 'red') ? 'TEAM RED WINS!' : 'TEAM BLUE WINS!',
            'Winning 4 highlighted — solid + swirl both count for the team'
          );
        }, 1100);

        return;
      }

      if(isBoardFull()){
        setBanner('DRAW!', 'Board is full — no connect 4. Hit Play Again.');
        accepting = false;
        updateDropButtons();
        return;
      }

      step++;
      accepting = true;
      updateTurnUI();
    }, {once:true});
  }

  function clearBoard(){
    document.querySelector('.boardWrap')?.classList.remove('dimBoard');
    document.querySelectorAll('.winHold').forEach(el => el.classList.remove('winHold'));

    board = Array.from({length:ROWS}, () => Array(COLS).fill(null));
    document.querySelectorAll('.disc').forEach(d => d.remove());
    banner.classList.remove('show');
    rulesOverlay.classList.remove('show');
    accepting = true;
    updateTurnUI();
  }

  // Buttons
  document.getElementById('newRound').onclick = () => {
    clearBoard();
    // keep step as-is so the fixed cycle continues
  };

  document.getElementById('reset').onclick = () => {
    clearBoard();
    step = 0;
    updateTurnUI();
  };

  document.getElementById('playAgain').onclick = () => {
    clearBoard();
  };

  // Rules overlay
  rulesBtn.onclick = () => {
    setRulesPdf();
    rulesOverlay.classList.add('show');
    updateDropButtons();
  };
  closeRules.onclick = () => {
    rulesOverlay.classList.remove('show');
    updateDropButtons();
  };

  window.addEventListener('keydown', (e) => {
    if(rulesOverlay.classList.contains('show')){
      if(e.key === 'Escape') closeRules.click();
      return;
    }

    if(banner.classList.contains('show')){
      if(e.key === 'Escape') clearBoard();
      return;
    }

    if(e.key >= '1' && e.key <= '7') drop(parseInt(e.key,10)-1);
    if(e.key.toLowerCase() === 'r') document.getElementById('reset').click();
    if(e.key.toLowerCase() === 'h') window.location.href = "index.html";
  });

  // init
  buildBoard();
  setRulesPdf();
  updateTurnUI();
})();
</script>
</body>
</html>
